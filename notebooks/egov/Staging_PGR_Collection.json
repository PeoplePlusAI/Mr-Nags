{
	"info": {
		"_postman_id": "2830d019-7b49-48a3-81a4-5ff177d2706a",
		"name": "Staging PGR collection",
		"description": "This collection logs in a citizen user and sets the auth token as an environment variable. Then, it creates a PGR complaint by using the auth token and citizen info.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "21974110"
	},
	"item": [
		{
			"name": "Citizen Auth",
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"var jsonData = pm.response.json();",
							"pm.environment.set(\"authToken\", jsonData.access_token);"
						],
						"type": "text/javascript"
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "authority",
						"value": "staging.digit.org"
					},
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "accept-language",
						"value": "en-GB,en-US;q=0.9,en;q=0.8"
					},
					{
						"key": "authorization",
						"value": "Basic ZWdvdi11c2VyLWNsaWVudDo="
					},
					{
						"key": "content-type",
						"value": "application/x-www-form-urlencoded"
					},
					{
						"key": "cookie",
						"value": "intercom-id-xp1951jv=088fb443-01d8-424c-ae00-e0e063c12467; intercom-device-id-xp1951jv=a07021de-7d91-4db7-be32-c34114d4a481; _ga_6130JJKLD4=GS1.1.1694144254.10.0.1694144254.60.0.0; _ga_0JZG96DZSM=GS1.1.1694494852.3.1.1694494988.60.0.0; _ga_V2CPZCVTXQ=GS1.1.1697020890.2.0.1697020890.0.0.0; _ga_2E44ZSYXS7=GS1.1.1701074984.3.1.1701075131.0.0.0; _ga_XBQP06FR8V=GS1.1.1702366496.30.1.1702367318.60.0.0; _ga_H9YC8FEN6F=GS1.1.1703150384.115.0.1703150384.60.0.0; _ga=GA1.1.1659220014.1654494485; _ga_P1TZCPKF6S=GS1.1.1703150384.22.1.1703150911.29.0.0; __cuid=e66915233c3b4a8ba44f97202a9c0893; amp_fef1e8=a5fc1a47-3f39-4553-b5d4-f2f9be17d201R...1hi5r7rf9.1hi5racf1.4hb.4h.4ls"
					},
					{
						"key": "origin",
						"value": "https://staging.digit.org"
					},
					{
						"key": "referer",
						"value": "https://staging.digit.org/digit-ui/citizen/login/otp"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not_A Brand\";v=\"8\", \"Chromium\";v=\"120\", \"Google Chrome\";v=\"120\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"macOS\""
					},
					{
						"key": "sec-fetch-dest",
						"value": "empty"
					},
					{
						"key": "sec-fetch-mode",
						"value": "cors"
					},
					{
						"key": "sec-fetch-site",
						"value": "same-origin"
					},
					{
						"key": "user-agent",
						"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
					}
				],
				"body": {
					"mode": "urlencoded",
					"urlencoded": [
						{
							"key": "username",
							"value": "7878787878",
							"type": "text"
						},
						{
							"key": "password",
							"value": "123456",
							"type": "text"
						},
						{
							"key": "tenantId",
							"value": "pg",
							"type": "text"
						},
						{
							"key": "userType",
							"value": "citizen",
							"type": "text"
						},
						{
							"key": "scope",
							"value": "read",
							"type": "text"
						},
						{
							"key": "grant_type",
							"value": "password",
							"type": "text"
						}
					]
				},
				"url": {
					"raw": "{{url}}/user/oauth/token?_=1703558789842",
					"host": [
						"{{url}}"
					],
					"path": [
						"user",
						"oauth",
						"token"
					],
					"query": [
						{
							"key": "_",
							"value": "1703558789842"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Create PGR Complaint",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "authority",
						"value": "staging.digit.org"
					},
					{
						"key": "accept",
						"value": "application/json, text/plain, */*"
					},
					{
						"key": "accept-language",
						"value": "en-GB,en-US;q=0.9,en;q=0.8"
					},
					{
						"key": "content-type",
						"value": "application/json;charset=UTF-8"
					},
					{
						"key": "cookie",
						"value": "intercom-id-xp1951jv=088fb443-01d8-424c-ae00-e0e063c12467; intercom-device-id-xp1951jv=a07021de-7d91-4db7-be32-c34114d4a481; _ga_6130JJKLD4=GS1.1.1694144254.10.0.1694144254.60.0.0; _ga_0JZG96DZSM=GS1.1.1694494852.3.1.1694494988.60.0.0; _ga_V2CPZCVTXQ=GS1.1.1697020890.2.0.1697020890.0.0.0; _ga_2E44ZSYXS7=GS1.1.1701074984.3.1.1701075131.0.0.0; _ga_XBQP06FR8V=GS1.1.1702366496.30.1.1702367318.60.0.0; _ga_H9YC8FEN6F=GS1.1.1703150384.115.0.1703150384.60.0.0; _ga=GA1.1.1659220014.1654494485; _ga_P1TZCPKF6S=GS1.1.1703150384.22.1.1703150911.29.0.0; __cuid=e66915233c3b4a8ba44f97202a9c0893; amp_fef1e8=a5fc1a47-3f39-4553-b5d4-f2f9be17d201R...1hi5r7rf9.1hi5racf1.4hb.4h.4ls"
					},
					{
						"key": "origin",
						"value": "https://staging.digit.org"
					},
					{
						"key": "referer",
						"value": "https://staging.digit.org/digit-ui/citizen/pgr/create-complaint/additional-details"
					},
					{
						"key": "sec-ch-ua",
						"value": "\"Not_A Brand\";v=\"8\", \"Chromium\";v=\"120\", \"Google Chrome\";v=\"120\""
					},
					{
						"key": "sec-ch-ua-mobile",
						"value": "?0"
					},
					{
						"key": "sec-ch-ua-platform",
						"value": "\"macOS\""
					},
					{
						"key": "sec-fetch-dest",
						"value": "empty"
					},
					{
						"key": "sec-fetch-mode",
						"value": "cors"
					},
					{
						"key": "sec-fetch-site",
						"value": "same-origin"
					},
					{
						"key": "user-agent",
						"value": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 Safari/537.36"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"service\": {\n        \"tenantId\": \"pg.cityb\",\n        \"serviceCode\": \"NoStreetlight\",\n        \"description\": \"\",\n        \"additionalDetail\": {},\n        \"source\": \"web\",\n        \"address\": {\n            \"city\": \"City B\",\n            \"district\": \"City B\",\n            \"region\": \"City B\",\n            \"state\": \"Demo\",\n            \"locality\": {\n                \"code\": \"SUN11\",\n                \"name\": \"Back Side 33 KVA Grid Patiala Road\"\n            },\n            \"geoLocation\": {}\n        }\n    },\n    \"workflow\": {\n        \"action\": \"APPLY\"\n    },\n    \"RequestInfo\": {\n        \"apiId\": \"Rainmaker\",\n        \"authToken\": \"{{authToken}}\",\n        \"userInfo\": {\n            \"id\": 2079,\n            \"uuid\": \"7e2b023a-2f7f-444c-a48e-78d75911387a\",\n            \"userName\": \"7878787878\",\n            \"name\": \"Lata\",\n            \"mobileNumber\": \"7878787878\",\n            \"emailId\": \"\",\n            \"locale\": null,\n            \"type\": \"CITIZEN\",\n            \"roles\": [\n                {\n                    \"name\": \"Citizen\",\n                    \"code\": \"CITIZEN\",\n                    \"tenantId\": \"pg\"\n                }\n            ],\n            \"active\": true,\n            \"tenantId\": \"pg\",\n            \"permanentCity\": \"pg.citya\"\n        },\n        \"msgId\": \"1703653602370|en_IN\",\n        \"plainAccessRequest\": {}\n    }\n}"
				},
				"url": {
					"raw": "{{url}}/pgr-services/v2/request/_create?tenantId=pg.cityb",
					"host": [
						"{{url}}"
					],
					"path": [
						"pgr-services",
						"v2",
						"request",
						"_create"
					],
					"query": [
						{
							"key": "tenantId",
							"value": "pg.cityb"
						}
					]
				}
			},
			"response": []
		}
	]
}